<!DOCTYPE html>
<html lang="zh-tw">
<head>
    <meta charset="UTF-8">
    <title>hw_05</title>
    <link rel="stylesheet" href = "template.css">
    <style>
        .left {
            border: 3px solid #C05640;
            padding: 10px;
            margin: 20px;
            float: left;
            width: 43%;
            height: 200px;
        }
        h2 {
            padding: 10px;
        }
        .right {
            border: 3px solid #C05640;
            padding: 10px;
            margin: 20px;
            float: right;
            width: 43%;
            height: 200px;
        }
        input {
            margin: 20px;
            width: 80px;
            height: 40px;
        }
    </style>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            document.getElementById("date").addEventListener("focus", GetDate);
            document.getElementById("send").addEventListener("click", Print);
            document.getElementById("send").addEventListener("click", Age);
        });
        
        function GetDate() {
            var bday_y = document.getElementById("year").value;
            var bday_m = document.getElementById("month").value;
            var DATE = document.getElementById("date");
            DATE.options.length = 0;
            var getdate = new Date(bday_y, bday_m, 0)
            var g = getdate.getDate()
            for (var d = 1; d <= g; d++){
                DATE.add(new Option(d,d)); 
            }
        }
        function Age () {
            var bday_y = document.getElementById("year").value;
            var bday_m = document.getElementById("month").value;
            var bday_d = document.getElementById("date").value;
            var today_y = new Date().getFullYear();
            var today_m = new Date().getMonth() + 1;
            var today_d = new Date().getDate();
            if (today_m > bday_m || today_m == bday_m && today_d <= bday_d){age_y = today_y - bday_y}
            else if (today_m < bday_m || today_m == bday_m && today_d > bday_d){age_y = today_y - bday_y - 1}
            if (today_m > bday_m){
                if (today_d >= bday_d){age_m = today_m - bday_m}
                else if (today_d < bday_d){age_m = today_m - bday_m - 1}
            }
            else if (today_m < bday_m){
                if (today_d >= bday_d){age_m = 12 - bday_m + today_m}
                else if (today_d < bday_d){age_m = 12 - bday_m + today_m - 1}
            }
            else if (today_m == bday_m){
                if (today_d >= bday_d){age_m = today_m - bday_m}
                else if (today_d < bday_d){age_m = 12 - bday_m + today_m - 1}
            }
            if (today_d >= bday_d){age_d = today_d - bday_d}
            else if (today_d < bday_d){age_d = new Date(today_y, today_m + 1, 0).getDate()- bday_d + today_d}
            document.getElementById("age").textContent = "You are " + age_y + " years " + age_m + " months " + age_d + " days old!!"
        }
        function Print() {
            var bday_y = document.getElementById("year").value;
            var bday_m = document.getElementById("month").value;
            var bday_d = document.getElementById("date").value;
            document.getElementById("txt").textContent = "Your birthday is on " + bday_y + "," + bday_m + "," + bday_d
        }
    </script>
</head>
<div class = "allpage">
    <header>
        <div class = "title">
            <h2>AIEN0215 -- Lin, YiHsuan</h2>
            <h4 class = "date"> May, 2018</h4>
        </div>
        <nav>
            <ul>
                <li><a href = "hw_01.html">hw_1 -- 九九乘法表</a></li>
                <li><a href = "hw_02.html">hw_2 -- 表單驗證</a></li>
                <li><a href = "hw_03.html">hw_3 -- 星星評分</a></li>
                <li><a href = "hw_04.html">hw_4 -- 廣告輪播</a></li>
                <li><a href = "hw_05.html">hw_5 -- 日曆製作</a></li>
            </ul>  
        </nav>
    </header>
    <div class = "content">
        <div class = "left">
            <h2>Please input your birthday.</h2>
            <select name = "year" id = "year">
                <script>
                    for (var y = 2010; y < 2021; y++){
                    document.write("<option value ="+ y + ">" + y + "</option>");
                    }
                </script>
            </select>
            <span>年</span>
            <select name = "month" id = "month">
                <script>
                    for (var m = 1; m < 13; m++){
                    document.write("<option value ="+ m + ">" + m + "</option>");
                    }
                </script>
            </select>
            <span>月</span>
            <select name = "date" id = "date">
                <option value = "1">1</option>
            </select>
            <span>日</span>
            <input type = "button" id = "send" value = "確認生日">
        </div>
        <div class = "right">
            <h2 id = "txt">Welcome</h2>
            <h2 id = "age"></h2>
        </div>     
    </div>
    <footer>
        <h4 class = "contact"> e-mail : b01204002@gmail.com</h4>
    </footer>
</div>
</html>